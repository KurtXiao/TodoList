{"ast":null,"code":"import _toConsumableArray from\"/Users/zechuanxiao/Documents/Vanderbilt/Junior/Projects/DoListGo/TodoListN/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/zechuanxiao/Documents/Vanderbilt/Junior/Projects/DoListGo/TodoListN/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/zechuanxiao/Documents/Vanderbilt/Junior/Projects/DoListGo/TodoListN/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/zechuanxiao/Documents/Vanderbilt/Junior/Projects/DoListGo/TodoListN/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/zechuanxiao/Documents/Vanderbilt/Junior/Projects/DoListGo/TodoListN/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/zechuanxiao/Documents/Vanderbilt/Junior/Projects/DoListGo/TodoListN/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/Users/zechuanxiao/Documents/Vanderbilt/Junior/Projects/DoListGo/TodoListN/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import'../styles/AllItems.css';import controlSign from'../images/control.png';import addition from'../images/addition.png';import confirmSign from'../images/confirmOrange.png';import SingleItem from\"./SingleItem\";import store from\"../store\";import{equalArrays}from\"../utils/redux\";import{setState}from\"../actions/allEvents\";import{updateState}from'../utils/server';import{LABEL_ITEM,PROJECT_ITEM}from\"../utils/constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AllItems=/*#__PURE__*/function(_React$Component){_inherits(AllItems,_React$Component);var _super=_createSuper(AllItems);function AllItems(props){var _this;_classCallCheck(this,AllItems);_this=_super.call(this,props);_this.state={displayAddItem:'none',displayItems:'none',items:[],name:''};return _this;}_createClass(AllItems,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return store.subscribe(this.handleItemsChange.bind(this));case 2:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"handleItemsChange\",value:function handleItemsChange(){var _store$getState$allEv,_store$getState$allEv2;var newItems;if(this.props.type===LABEL_ITEM)newItems=(_store$getState$allEv=store.getState().allEvents)===null||_store$getState$allEv===void 0?void 0:_store$getState$allEv.labels;else if(this.props.type===PROJECT_ITEM)newItems=(_store$getState$allEv2=store.getState().allEvents)===null||_store$getState$allEv2===void 0?void 0:_store$getState$allEv2.projects;if(newItems&&!equalArrays(newItems,this.state.items)){this.setState({items:_toConsumableArray(newItems)});}}},{key:\"displayAddItem\",value:function displayAddItem(){this.setState({displayAddItem:this.state.displayAddItem==='none'?'block':'none'});}},{key:\"displayItems\",value:function displayItems(){var displayVal=this.state.displayItems==='none'?'block':'none';if(this.state.items.length===0)displayVal='none';this.setState({displayItems:displayVal});}},{key:\"getItems\",value:function getItems(items){var arr=[];for(var i=0;i<items.length;++i){arr.push(/*#__PURE__*/_jsx(SingleItem,{name:items[i],type:this.props.type,itemSign:this.props.itemSign},Math.random()));}return arr;}},{key:\"handleInputValue\",value:function handleInputValue(e){this.setState({name:e.target.value});}},{key:\"addItem\",value:function(){var _addItem=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var state;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(this.state.name==='')){_context2.next=3;break;}alert(\"\".concat(this.props.type===LABEL_ITEM?\"Label\":\"Project\",\" name must not be empty!\"));return _context2.abrupt(\"return\");case 3:if(!(this.props.type===LABEL_ITEM)){_context2.next=9;break;}if(!(store.getState().allEvents.labels.indexOf(this.state.name)!==-1)){_context2.next=7;break;}alert(\"Repeated label!\");return _context2.abrupt(\"return\");case 7:_context2.next=13;break;case 9:if(!(this.props.type===PROJECT_ITEM)){_context2.next=13;break;}if(!(store.getState().allEvents.projects.indexOf(this.state.name)!==-1)){_context2.next=13;break;}alert(\"Repeated project!\");return _context2.abrupt(\"return\");case 13:state=Object.assign({},store.getState().allEvents);if(this.props.type===LABEL_ITEM)state.labels.push(this.state.name);else if(this.props.type===PROJECT_ITEM)state.projects.push(this.state.name);_context2.next=17;return store.dispatch(setState(state));case 17:this.setState({displayAddItem:'none',name:''});updateState();case 19:case\"end\":return _context2.stop();}}},_callee2,this);}));function addItem(){return _addItem.apply(this,arguments);}return addItem;}()},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"label-controller\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"addition\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"addition-arrow\",src:controlSign,onClick:this.displayItems.bind(this)}),/*#__PURE__*/_jsx(\"span\",{className:\"addition-text\",onClick:this.displayItems.bind(this),children:this.props.type===LABEL_ITEM?\"Labels\":\"Projects\"}),/*#__PURE__*/_jsx(\"img\",{className:\"addition-sign\",src:addition,onClick:this.displayAddItem.bind(this)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"single-label-wrapper\",style:{display:this.state.displayItems},children:this.getItems(this.state.items)}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-label\",style:{display:this.state.displayAddItem},children:[/*#__PURE__*/_jsx(\"img\",{className:\"add-label-image\",src:this.props.itemSign}),/*#__PURE__*/_jsx(\"input\",{value:this.state.name,className:\"add-label-name\",onChange:this.handleInputValue.bind(this)}),/*#__PURE__*/_jsx(\"img\",{className:\"add-label-confirm\",onClick:this.addItem.bind(this),src:confirmSign})]})]});}}]);return AllItems;}(React.Component);export default AllItems;","map":{"version":3,"sources":["/Users/zechuanxiao/Documents/Vanderbilt/Junior/Projects/DoListGo/TodoListN/src/components/AllItems.js"],"names":["React","controlSign","addition","confirmSign","SingleItem","store","equalArrays","setState","updateState","LABEL_ITEM","PROJECT_ITEM","AllItems","props","state","displayAddItem","displayItems","items","name","subscribe","handleItemsChange","bind","newItems","type","getState","allEvents","labels","projects","displayVal","length","arr","i","push","itemSign","Math","random","e","target","value","alert","indexOf","Object","assign","dispatch","display","getItems","handleInputValue","addItem","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport '../styles/AllItems.css';\nimport controlSign from '../images/control.png';\nimport addition from '../images/addition.png';\nimport confirmSign from '../images/confirmOrange.png';\nimport SingleItem from \"./SingleItem\";\nimport store from \"../store\";\nimport { equalArrays } from \"../utils/redux\";\nimport { setState } from \"../actions/allEvents\";\nimport { updateState } from '../utils/server';\nimport { LABEL_ITEM, PROJECT_ITEM } from \"../utils/constants\";\n\nclass AllItems extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            displayAddItem: 'none',\n            displayItems: 'none',\n            items: [],\n            name: '',\n        }\n    }\n    async componentDidMount() {\n        await store.subscribe(this.handleItemsChange.bind(this));\n    }\n    handleItemsChange() {\n        let newItems;\n        if(this.props.type === LABEL_ITEM) newItems = store.getState().allEvents?.labels;\n        else if(this.props.type === PROJECT_ITEM) newItems = store.getState().allEvents?.projects;\n        if(newItems && !equalArrays(newItems, this.state.items)) {\n            this.setState({\n                items: [...newItems]\n            })\n        }\n    }\n    displayAddItem() {\n        this.setState({\n            displayAddItem: this.state.displayAddItem === 'none' ? 'block' : 'none'\n        });\n    }\n    displayItems() {\n        let displayVal = this.state.displayItems === 'none' ? 'block' : 'none';\n        if(this.state.items.length === 0) displayVal = 'none';\n        this.setState({\n            displayItems: displayVal\n        })\n    }\n    getItems(items) {\n        let arr = [];\n        for(let i = 0; i < items.length; ++i) {\n            arr.push(<SingleItem key={Math.random()} name={items[i]} type={this.props.type} itemSign={this.props.itemSign}/>);\n        }\n        return arr;\n    }\n    handleInputValue(e) {\n        this.setState({\n            name: e.target.value\n        });\n    }\n    async addItem() {\n        if(this.state.name === '') {\n            alert(`${this.props.type === LABEL_ITEM ? \"Label\" : \"Project\"} name must not be empty!`);\n            return;\n        }\n        if(this.props.type === LABEL_ITEM) {\n            if(store.getState().allEvents.labels.indexOf(this.state.name) !== -1) {\n                alert(`Repeated label!`);\n                return;\n            }\n        }\n        else if(this.props.type === PROJECT_ITEM) {\n            if(store.getState().allEvents.projects.indexOf(this.state.name) !== -1) {\n                alert(`Repeated project!`);\n                return;\n            }\n        }\n        let state = Object.assign({}, store.getState().allEvents);\n        if(this.props.type === LABEL_ITEM) state.labels.push(this.state.name);\n        else if(this.props.type === PROJECT_ITEM) state.projects.push(this.state.name);\n        await store.dispatch(setState(state));\n        this.setState({\n            displayAddItem: 'none',\n            name: ''\n        });\n        updateState();\n    }\n    render() {\n        return <div className=\"label-controller\">\n            <div className=\"addition\">\n                <img className=\"addition-arrow\" src={controlSign} onClick={this.displayItems.bind(this)}/>\n                <span className=\"addition-text\" onClick={this.displayItems.bind(this)}>{this.props.type === LABEL_ITEM ? \"Labels\" : \"Projects\"}</span>\n                <img className=\"addition-sign\" src={addition} onClick={this.displayAddItem.bind(this)}/>\n            </div>\n            <div className=\"single-label-wrapper\" style={{display: this.state.displayItems}}>\n                {this.getItems(this.state.items)}\n            </div>\n            <div className='add-label' style={{display: this.state.displayAddItem}}>\n                <img className='add-label-image' src={this.props.itemSign}/>\n                <input value={this.state.name} className='add-label-name' onChange={this.handleInputValue.bind(this)}/>\n                <img className=\"add-label-confirm\" onClick={this.addItem.bind(this)} src={confirmSign}/>\n            </div>\n        </div>;\n    }\n}\n\nexport default AllItems;"]},"metadata":{},"sourceType":"module"}